@page "/courses/{courseUuid}"
@model TdA26_CyganStudios.Pages.Courses.DetailsModel
@{
    ViewData["Title"] = Model.Course.Name;
    const int MaxFeedPreview = 4;
}

<h1>@Model.Course.Name</h1>
<h3>Lecturer: @Model.Course.Lecturer.UserName</h3>

<p>@Model.Course.Description</p>

<partial name="_MaterialsPreviewGrid"
    model="new MaterialsPreviewGridModel(Model.CourseUuid, Model.Course.Materials, false, 4)" />

<partial name="_QuizzesPreviewGrid"
    model="new QuizzesPreviewGridModel(Model.CourseUuid, Model.Course.Quizzes, false, 4)" />

<partial name="_CourseFeedPreview" model="new CourseFeedPreviewModel(Model.CourseUuid, Model.FeedItems, false, MaxFeedPreview)" />

@section Scripts {
    <script src="~/js/course-feed-sse.js"></script>
    <script>
        startCourseFeed("@Model.CourseUuid", @MaxFeedPreview);
    </script>
}